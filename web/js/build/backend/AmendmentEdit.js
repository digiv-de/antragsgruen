define(["require","exports","./MotionSupporterEdit","../shared/AntragsgruenEditor","../shared/AmendmentEditSinglePara","./MotionSupporterEdit"],function(t,e,n,i,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AmendmentEdit=void 0;var a=function(){function t(){this.lang=$("html").attr("lang"),this.$editTextCaller=$("#amendmentTextEditCaller"),$("#amendmentDateCreationHolder").datetimepicker({locale:this.lang}),$("#amendmentDateResolutionHolder").datetimepicker({locale:this.lang}),$("#resolutionDateHolder").datetimepicker({locale:$("#resolutionDate").data("locale"),format:"L"}),this.$editTextCaller.find("button").on("click",this.textEditCalled.bind(this)),$(".amendmentDeleteForm").on("submit",function(t,e){if(!e||(e.confirmed,0)||!0!==e.confirmed){var n=$(this);t.preventDefault(),bootbox.confirm(__t("admin","delAmendmentConfirm"),function(t){t&&n.trigger("submit",{confirmed:!0})})}}),this.initVotingFunctions(),new n.MotionSupporterEdit($("#motionSupporterHolder"))}return t.prototype.textEditCalledMultiPara=function(){$(".wysiwyg-textarea").each(function(){var t=$(this).find(".texteditor"),e=new i.AntragsgruenEditor(t.attr("id")).getEditor();t.parents("form").on("submit",function(){t.parent().find("textarea.raw").val(e.getData()),void 0!==e.plugins.lite&&(e.plugins.lite.findPlugin(e).acceptAll(),t.parent().find("textarea.consolidated").val(e.getData()))})})},t.prototype.textEditCalled=function(){this.$editTextCaller.addClass("hidden"),$("#amendmentTextEditHolder").removeClass("hidden"),this.$editTextCaller.data("multiple-paragraphs")?this.textEditCalledMultiPara():new d.AmendmentEditSinglePara,$("#amendmentUpdateForm").append("<input type='hidden' name='edittext' value='1'>")},t.prototype.initVotingFunctions=function(){var t=$(".votingResultCloser"),e=$(".votingResultOpener"),n=$(".contentVotingResult, .contentVotingResultComment");e.on("click",function(){t.removeClass("hidden"),e.addClass("hidden"),n.removeClass("hidden")}),t.on("click",function(){t.addClass("hidden"),e.removeClass("hidden"),n.addClass("hidden")})},t}();e.AmendmentEdit=a});
//# sourceMappingURL=AmendmentEdit.js.map
