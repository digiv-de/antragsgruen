{"version":3,"sources":["frontend/ConsultationDiscussionTags.ts"],"names":["ConsultationDiscussionTags","$widget","this","currTagFilter","currSort","currSortAsc","initComments","initTags","prototype","_this","find","on","removeClass","grid","Isotope","itemSelector","layoutMode","getSortData","title","titlePrefix","created","comments","amendments","ev","preventDefault","$tagBtn","$","currentTarget","filter","data","setFilters","addClass","$sortBtn","arrange","sortBy","sortAscending","exports"],"mappings":"6IAEA,IAAAA,EAAA,WAMI,SAAAA,EAAoBC,GAAAC,KAAAD,QAAAA,EAJZC,KAAAC,cAAgB,IAChBD,KAAAE,SAAW,QACXF,KAAAG,aAAc,EAGlBH,KAAKI,eACLJ,KAAKK,WAqEb,OAlEYP,EAAAQ,UAAAF,aAAR,WAAA,IAAAG,EAAAP,KACIA,KAAKD,QAAQS,KAAK,8CAA8CC,GAAG,QAAS,WACxEF,EAAKR,QAAQS,KAAK,6BAA6BE,YAAY,gBAI3DZ,EAAAQ,UAAAD,SAAR,WAAA,IAAAE,EAAAP,KACIA,KAAKW,KAAO,IAAIC,QAAQ,wCAAyC,CAC7DC,aAAc,YACdC,WAAY,WACZC,YAAa,CACTC,MAAO,eACPC,YAAa,sBACbC,QAAS,0BACTC,SAAU,+BACVC,WAAY,oCAIpBpB,KAAKD,QAAQS,KAAK,cAAcC,GAAG,QAAS,SAACY,GACzCA,EAAGC,iBAEH,IAAMC,EAAUC,EAAEH,EAAGI,eACfC,EAASH,EAAQI,KAAK,UACvBD,IAILnB,EAAKN,cAAgByB,EACrBnB,EAAKqB,aAELrB,EAAKR,QAAQS,KAAK,cAAcE,YAAY,UAC5Ca,EAAQM,SAAS,aAGrB7B,KAAKD,QAAQS,KAAK,wCAAwCC,GAAG,QAAS,SAACY,GACnEA,EAAGC,iBAEH,IAAMQ,EAAWN,EAAEH,EAAGI,eACtBlB,EAAKL,SAAW4B,EAASH,KAAK,QAC9BpB,EAAKJ,YAA0C,SAA3B2B,EAASH,KAAK,SAClCpB,EAAKqB,aAELrB,EAAKR,QAAQS,KAAK,wCAAwCE,YAAY,UACtEoB,EAASD,SAAS,aAIlB/B,EAAAQ,UAAAsB,WAAR,WACI,IAAIF,EAAS,GACc,MAAvB1B,KAAKC,gBACLyB,GAAU1B,KAAKC,eAEG,UAAlBD,KAAKE,WACLwB,GAAU,WAEC,KAAXA,IACAA,EAAS,KAGb1B,KAAKW,KAAKoB,QAAQ,CACdL,OAAQA,EACRM,OAAQhC,KAAKE,SACb+B,cAAejC,KAAKG,eAGhCL,EA7EA,GAAaoC,EAAApC,2BAAAA","file":"ConsultationDiscussionTags.js","sourcesContent":["declare let Isotope: any;\n\nexport class ConsultationDiscussionTags {\n    private grid;\n    private currTagFilter = '*';\n    private currSort = 'phase';\n    private currSortAsc = true;\n\n    constructor(private $widget: JQuery) {\n        this.initComments();\n        this.initTags();\n    }\n\n    private initComments() {\n        this.$widget.find(\".commentListHolder .showAllComments button\").on(\"click\", () => {\n            this.$widget.find(\".expandableRecentComments\").removeClass(\"shortened\");\n        });\n    }\n\n    private initTags() {\n        this.grid = new Isotope('.motionListFilter .motionListFiltered', {\n            itemSelector: '.sortitem',\n            layoutMode: 'vertical',\n            getSortData: {\n                title: '[data-title]',\n                titlePrefix: '[data-title-prefix]',\n                created: '[data-created] parseInt',\n                comments: '[data-num-comments] parseInt',\n                amendments: '[data-num-amendments] parseInt'\n            }\n        });\n\n        this.$widget.find(\".tagList a\").on(\"click\", (ev) => {\n            ev.preventDefault();\n\n            const $tagBtn = $(ev.currentTarget);\n            const filter = $tagBtn.data(\"filter\");\n            if (!filter) {\n                return;\n            }\n\n            this.currTagFilter = filter;\n            this.setFilters();\n\n            this.$widget.find(\".tagList a\").removeClass(\"active\");\n            $tagBtn.addClass(\"active\");\n        });\n\n        this.$widget.find(\".motionListFilter .motionSort button\").on(\"click\", (ev) => {\n            ev.preventDefault();\n\n            const $sortBtn = $(ev.currentTarget);\n            this.currSort = $sortBtn.data(\"sort\");\n            this.currSortAsc = ($sortBtn.data(\"order\") !== 'desc');\n            this.setFilters();\n\n            this.$widget.find(\".motionListFilter .motionSort button\").removeClass(\"active\");\n            $sortBtn.addClass(\"active\");\n        });\n    }\n\n    private setFilters() {\n        let filter = '';\n        if (this.currTagFilter !== '*') {\n            filter += this.currTagFilter;\n        }\n        if (this.currSort !== 'phase') {\n            filter += '.motion';\n        }\n        if (filter === '') {\n            filter = '*'\n        }\n\n        this.grid.arrange({\n            filter: filter,\n            sortBy: this.currSort,\n            sortAscending: this.currSortAsc\n        });\n    }\n}\n"]}